"use strict";(self.webpackChunkecommerce_f=self.webpackChunkecommerce_f||[]).push([[829],{829:(w,v,d)=>{d.r(v),d.d(v,{ProductsModule:()=>s});var l=d(6895),g=d(3128),t=d(8256),Z=d(7644);const A=function(e){return["/manager/products/edit",e]};function h(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",4),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",5),t._uU(12,"Edit"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){const p=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.deleteItem(p.id))}),t._uU(14,"Remove"),t.qZA()()()}if(2&e){const o=r.$implicit;t.xp6(2),t.Q6J("src",o.image,t.LSH),t.xp6(2),t.Oqu(null==o?null:o.name),t.xp6(2),t.Oqu(t.xi3(7,5,null==o?null:o.price,"USD")),t.xp6(3),t.Oqu(null==o||null==o.category?null:o.category.name),t.xp6(2),t.Q6J("routerLink",t.VKq(8,A,o.id))}}class f{constructor(r){this.productsService=r,this.products=[]}ngOnInit(){this.getAll()}getAll(){this.productsService.getProducts({}).pipe().subscribe(r=>{this.products=r})}deleteItem(r){this.productsService.deleteItem(r).pipe().subscribe(()=>{this.getAll()})}}f.\u0275fac=function(r){return new(r||f)(t.Y36(Z.su))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-products"]],decls:17,vars:1,consts:[[1,"p-2","d-flex","justify-content-end"],["routerLink","/manager/products/create",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["alt","product","width","100px",3,"src"],[1,"button-edit","btn","btn-secondary","mr-2",3,"routerLink"],[1,"button-delete","btn","btn-danger",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2,"Add"),t.qZA()(),t.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Price"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Category"),t.qZA(),t._UZ(14,"th"),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,h,15,10,"tr",3),t.qZA()()),2&r&&(t.xp6(16),t.Q6J("ngForOf",o.products))},dependencies:[l.sg,g.rH,l.H9],styles:[".button-edit[_ngcontent-%COMP%]{background-color:#000;border:1px solid rgb(255,203,255);display:grid;margin-bottom:1.5rem}.button-delete[_ngcontent-%COMP%]{background-color:red;border:1px solid red;display:grid}"]});var i=d(433),T=d(3900),q=d(9646),b=d(6943);function y(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Name is required"),t.qZA())}function x(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,y,2,0,"div",15),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.get("name"))||null==n.errors?null:n.errors.required)}}function I(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Description is required"),t.qZA())}function C(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,I,2,0,"div",15),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.get("description"))||null==n.errors?null:n.errors.required)}}function N(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Image is required"),t.qZA())}function P(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,N,2,0,"div",15),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.get("image"))||null==n.errors?null:n.errors.required)}}function U(e,r){if(1&e&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.name," ")}}function J(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Name is required"),t.qZA())}function Y(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,J,2,0,"div",15),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.get("categoryId"))||null==n.errors?null:n.errors.required)}}function E(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Name is required"),t.qZA())}function S(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,E,2,0,"div",15),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.get("price"))||null==n.errors?null:n.errors.required)}}class c{constructor(r,o,n,u){this.categoryService=r,this.productService=o,this.route=n,this.router=u,this.form=new i.cw({id:new i.NI(null),name:new i.NI("",i.kI.required),description:new i.NI("",i.kI.required),image:new i.NI("",i.kI.required),price:new i.NI("",i.kI.required),categoryId:new i.NI("",i.kI.required)}),this.categories$=this.categoryService.getAll()}ngOnInit(){this.route.params.pipe((0,T.w)(r=>r.id?this.productService.getOne(r.id):(0,q.of)(null))).subscribe(r=>{r&&this.form.patchValue({...r,categoryId:r.category.id})})}submit(){this.form.markAllAsTouched(),!this.form.invalid&&(this.form.value.id?this.productService.update(this.form.value.id,this.form.value).pipe().subscribe(()=>{this.router.navigate(["/manager/products"]).then(()=>{this.form.reset()})}):this.productService.create(this.form.value).pipe().subscribe(()=>{this.router.navigate(["/manager/products"]).then(()=>{this.form.reset()})}))}}c.\u0275fac=function(r){return new(r||c)(t.Y36(b.H),t.Y36(Z.su),t.Y36(g.gz),t.Y36(g.F0))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-product-add-edit"]],decls:30,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","mat-error error",4,"ngIf"],["for","description"],["type","text","id","description","placeholder","Description","formControlName","description",1,"form-control"],["for","image"],["type","text","id","image","placeholder","Image url","formControlName","image",1,"form-control"],["formControlName","categoryId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","price"],["type","number","id","price","placeholder","price","formControlName","price",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-3"],[1,"mat-error","error"],[4,"ngIf"],[3,"value"]],template:function(r,o){if(1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1)(2,"label",2),t._uU(3,"Name"),t.qZA(),t._UZ(4,"input",3),t.YNc(5,x,2,1,"div",4),t.qZA(),t.TgZ(6,"div",1)(7,"label",5),t._uU(8,"Description"),t.qZA(),t._UZ(9,"textarea",6),t.YNc(10,C,2,1,"div",4),t.qZA(),t.TgZ(11,"div",1)(12,"label",7),t._uU(13,"Image url"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,P,2,1,"div",4),t.qZA(),t.TgZ(16,"div",1)(17,"label",5),t._uU(18,"Category"),t.qZA(),t.TgZ(19,"select",9),t.YNc(20,U,2,2,"option",10),t.ALo(21,"async"),t.qZA(),t.YNc(22,Y,2,1,"div",4),t.qZA(),t.TgZ(23,"div",1)(24,"label",11),t._uU(25,"Price"),t.qZA(),t._UZ(26,"input",12),t.YNc(27,S,2,1,"div",4),t.qZA(),t.TgZ(28,"button",13),t._uU(29,"Submit"),t.qZA()()),2&r){let n,u,p,a,_;t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",(null==(n=o.form.get("name"))?null:n.invalid)&&(null==(n=o.form.get("name"))?null:n.touched)),t.xp6(5),t.Q6J("ngIf",(null==(u=o.form.get("description"))?null:u.invalid)&&(null==(u=o.form.get("description"))?null:u.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=o.form.get("image"))?null:p.invalid)&&(null==(p=o.form.get("image"))?null:p.touched)),t.xp6(5),t.Q6J("ngForOf",t.lcZ(21,7,o.categories$)),t.xp6(2),t.Q6J("ngIf",(null==(a=o.form.get("categoryId"))?null:a.invalid)&&(null==(a=o.form.get("categoryId"))?null:a.touched)),t.xp6(5),t.Q6J("ngIf",(null==(_=o.form.get("price"))?null:_.invalid)&&(null==(_=o.form.get("price"))?null:_.touched))}},dependencies:[l.sg,l.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.sg,i.u,l.Ov],styles:[".error[_ngcontent-%COMP%]{color:red}"]});const Q=[{path:"",component:f},{path:"create",component:c},{path:"edit/:id",component:c}];class m{}m.\u0275fac=function(r){return new(r||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[g.Bz.forChild(Q),g.Bz]});class s{}s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.ez,m,i.UX]})}}]);